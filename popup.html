<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Slack Engagement Summary</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 12px; width: 380px; }
      button { padding: 8px 10px; margin: 4px 0; cursor: pointer; }
      .muted { font-size: 12px; color: #555; }
      #status { margin-top: 6px; }
      #counts { margin-top: 6px; font-size: 13px; }

      .row { display: flex; gap: 8px; }
      .row > button { flex: 1; }

      .tabs { display: flex; gap: 6px; margin-top: 10px; }
      .tabs button { flex: 1; border: 1px solid #ddd; background: #f7f7f7; }
      .tabs button.active { background: #fff; border-bottom-color: #fff; font-weight: 600; }

      .panel { border: 1px solid #ddd; border-radius: 8px; padding: 8px; margin-top: 6px; background: #fff; }
      .controls { display: flex; gap: 6px; align-items: center; margin: 6px 0; }
      .controls .spacer { flex: 1; }
      input[type="search"] { width: 100%; padding: 6px; font-size: 12px; border: 1px solid #ddd; border-radius: 6px; }

      .table-wrap { max-height: 260px; overflow: auto; border: 1px solid #eee; border-radius: 6px; }
      table { width: 100%; border-collapse: collapse; font-size: 12px; }
      thead th { position: sticky; top: 0; background: #fafafa; border-bottom: 1px solid #eee; text-align: left; padding: 6px; }
      tbody td { border-bottom: 1px solid #f1f1f1; padding: 6px; white-space: nowrap; }
    </style>
  </head>
  <body>
    <button id="analyseBtn">Analyse current Slack view</button>
    <div id="status" class="muted">Open a Slack channel tab, scroll to load messages, then click Analyse.</div>
    <div id="counts"></div>

    <div class="controls" style="margin-top:6px;">
      <input id="keywordsFilter" type="search" placeholder="Message keywords (comma/semicolon separated, e.g. ai, llm)">
    </div>

    <div class="row" style="margin-top:8px;">
      <button id="copyBtn" disabled>Copy</button>
      <button id="downloadBtn" disabled>Download CSV</button>
    </div>

    <div class="tabs">
      <button id="tabWeeks" class="active">Weeks</button>
      <button id="tabSenders">Senders</button>
    </div>

    <div id="panelWeeks" class="panel">
      <div class="controls">
        <input id="filterWeeks" type="search" placeholder="Filter weeks">
        <div class="spacer"></div>
      </div>
      <div class="table-wrap"><table id="tableWeeks"></table></div>
    </div>

    <div id="panelSenders" class="panel" style="display:none;">
      <div class="controls">
        <input id="filterSenders" type="search" placeholder="Filter senders">
        <div class="spacer"></div>
      </div>
      <div class="table-wrap"><table id="tableSenders"></table></div>
    </div>

    <div class="muted">Tip: the buttons act on the currently selected tab.</div>
    <script src="popup.js"></script>
  </body>
</html>
